<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Home | Maya&Me</title>
    <link rel="website icon" type="png" href="images/maya.png">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Rubik:400,700'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/7f01a542af.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.x.x.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.x.x/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="stylesheets/user.css">
  </head>
  <body>
    <%- include('dietaryPreferences.ejs') %>

    <!-- Navigation -->
    <nav class="topnav">
        <a href="/login"><img src="images/logo.png" height="60px" width="60px" alt="Logo"></a>
        <div class="menu">
            <a class="nav" href="/UserDashboard">Home</a>
            <a class="nav" href="/confirmoderinfo">Orders</a>
            <!-- <a class="nav" id="openDietaryModal" href="#">Dietary Preferences</a> -->
            <a class="nav-link" href="#" id="dietaryPreferencesNav" onclick="openDietaryModal()">Dietary Preferences</a>

            <span class="nav welcome-message"><%= welcomeMessage %></span>
            <a class="nav nav-right" href="/logout">Logout</a>
            <button class="nav nav-button-right" onclick="openCartModal()"><i class="fas fa-shopping-cart"></i></button>
        </div>
    </nav>

    <!-- Mobile Menu Toggle -->
    <div class="menu-toggle">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div
      -->
    <div class="dashboard">
      <div class="dashboard-banner">
        <img src="images/long.jpg" alt=""/>
        <div class="banner-promo">
            <span><img class="logo" src="images/maya.png" alt="" height="330px"></span>  
      </div>
      <div class="dashboard-menu">
        <a href="#">Favorites</a>
        <a href="#">Best Seller</a>
        <a href="#">Top Rated</a>
        <a href="#">All</a>
      </div>
      </div>
      <div class="dashboard-content">
        <div class="dashboard-card">
          <img class="card-image" src="https://images4.alphacoders.com/998/thumbbig-998705.webp" alt="" />
          <div class="card-detail">
              <h4>Fries <span>Php 30</span></h4>
              <p>lorem ipsum dolor sit</p>
              <p class="card-time">
                  <span class="fas fa-clock"></span>15-30 mins
              </p>
              <button onclick="addToCart('Amazing Pizza', 30)">Add To Cart</button>
          </div>
      </div>
      <div class="dashboard-card">
        <img class="card-image" src="https://images4.alphacoders.com/855/thumbbig-855603.webp" alt="" />
        <div class="card-detail">
            <h4>Chicken Nuggets<span>Php 50</span></h4>
            <p>lorem ipsum dolor sit</p>
            <p class="card-time">
                <span class="fas fa-clock"></span>15-30 mins
            </p>
            <button onclick="addToCart('Chicken Nuggets', 50)">Add To Cart</button>
        </div>
    </div>
    <div class="dashboard-card">
      <img class="card-image" src="https://images2.alphacoders.com/956/thumbbig-956650.webp" alt="" />
      <div class="card-detail">
          <h4>T-bone Steak<span>Php 100</span></h4>
          <p>lorem ipsum dolor sit</p>
          <p class="card-time">
              <span class="fas fa-clock"></span>15-30 mins
          </p>
          <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
      </div>
  </div>
  <div class="dashboard-card">
    <img class="card-image" src="https://images6.alphacoders.com/132/thumbbig-1322101.webp" alt="" />
    <div class="card-detail">
        <h4>Mac & Cheese<span>Php 100</span></h4>
        <p>lorem ipsum dolor sit</p>
        <p class="card-time">
            <span class="fas fa-clock"></span>15-30 mins
        </p>
        <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
    </div>
</div>
<div class="dashboard-card">
  <img class="card-image" src="https://www.licious.in/blog/wp-content/uploads/2022/06/shutterstock_1339636625-1.jpg" alt="" />
  <div class="card-detail">
      <h4>Chicken Shawarma<span>Php 100</span></h4>
      <p>lorem ipsum dolor sit</p>
      <p class="card-time">
          <span class="fas fa-clock"></span>15-30 mins
      </p>
      <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
  </div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://secretldn.com/wp-content/uploads/2021/06/shutterstock_1510928255-2-1024x640.jpg" alt="" />
<div class="card-detail">
    <h4>Fish n Chips<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://www.feastingathome.com/wp-content/uploads/2023/05/Chicken-Adobo-9-800x1200.jpg" alt="" />
<div class="card-detail">
    <h4>Chicken Adobo<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://img.buzzfeed.com/tasty-app-user-assets-prod-us-east-1/recipes/8fd0812bec0248edb41312f41c218a2b.jpeg?resize=1000:*&output-format=auto&output-quality=auto" alt="" />
<div class="card-detail">
    <h4>Sizzling Pork Sisig<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://klysa.pl/wp-content/uploads/2020/05/dinakdakan-scaled.jpg" alt="" />
<div class="card-detail">
    <h4>Dinakdakan<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://i0.wp.com/whattoeatph.com/wp-content/uploads/2022/03/DSC_9120.jpg?fit=720%2C576&ssl=1" alt="" />
<div class="card-detail">
    <h4>Bicol Express<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://i0.wp.com/whattoeatph.com/wp-content/uploads/2022/03/DSC_9120.jpg?fit=720%2C576&ssl=1" alt="" />
<div class="card-detail">
    <h4>Bicol Express<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://www.wikihow.com/images/thumb/0/0f/Cook-Dinuguan-Step-11.jpg/aid10160856-v4-1200px-Cook-Dinuguan-Step-11.jpg" alt="" />
<div class="card-detail">
    <h4>Dinuguan<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://www.foodies.ph/_recipeimage/235340/spicy-bopis.jpg" alt="" />
<div class="card-detail">
    <h4>Bopis<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
<div class="dashboard-card">
<img class="card-image" src="https://assets.unileversolutions.com/v1/79598556.jpg?im=AspectCrop=(1440,600);Resize=(1440,600)" alt="" />
<div class="card-detail">
    <h4>BBQ<span>Php 100</span></h4>
    <p>lorem ipsum dolor sit</p>
    <p class="card-time">
        <span class="fas fa-clock"></span>15-30 mins
    </p>
    <button onclick="addToCart('T-bone Steak', 100)">Add To Cart</button>
</div>
</div>
  </div>
      <div id="cart-modal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeCartModal()">&times;</span>
          <h2>Cart</h2>
          <ul id="modal-cart-items"></ul>
          <div class="total-amount">Total: Php <span id="total-amount">0</span></div>
          <button onclick="placeOrder()">Place Order</button>
        </div>  
      </div>
    </div>
    <script>


$('#openDietaryModal').click(function(){
    $('#dietaryPreferencesModal').modal('show');
});

       const menuToggle = document.querySelector('.menu-toggle');
        const menu = document.querySelector('.menu');
  
  menuToggle.addEventListener('click', () => {
    menu.classList.toggle('show');
  });
  
  window.onscroll = function() {
  if (window.pageYOffset > 0) {
    document.querySelector('.topnav').classList.add('sticky');
  } else {
    document.querySelector('.topnav').classList.remove('sticky');
  }
};

  var cartItems = [];

  function addToCart(itemName, itemPrice) {
    var item = {
      name: itemName,
      price: itemPrice,
    };
    cartItems.push(item);
    updateCart();
  }

  function updateCart() {
    var cartList = document.getElementById("modal-cart-items");
    var totalAmount = document.getElementById("total-amount");
    cartList.innerHTML = "";

    var totalPrice = 0;

    for (var i = 0; i < cartItems.length; i++) {
      var li = document.createElement("li");
      li.appendChild(
        document.createTextNode(
          cartItems[i].name + " (Php " + cartItems[i].price + ")"
        )
      );
      cartList.appendChild(li);

      totalPrice += cartItems[i].price;
    }

    totalAmount.textContent = totalPrice;
  }

  function placeOrder() {
    var modal = document.getElementById("cart-modal");
    modal.style.display = "none";

    // Send a POST request to the server with the cart items
    fetch("/orders/create", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ products: cartItems }),
    })
      .then((response) => response.json())
      .then((data) => {
        console.log("Order placed:", data);
        cartItems = []; // Clear the cart after placing the order
        updateCart();
        alert("Order placed successfully!");
      })
      .catch((error) => {
        console.error("Error placing order:", error);
        alert("Error placing order. Please try again.");
      });
  }

  function openCartModal() {
    var modal = document.getElementById("cart-modal");
    modal.style.display = "block";
  }

  function closeCartModal() {
    var modal = document.getElementById("cart-modal");
    modal.style.display = "none";
  }

  window.addEventListener("click", function (event) {
    var modal = document.getElementById("cart-modal");
    var closeBtn = document.getElementsByClassName("close")[0];

    if (event.target === modal || event.target === closeBtn) {
      modal.style.display = "none";
    }
  });
</script>
</div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>
